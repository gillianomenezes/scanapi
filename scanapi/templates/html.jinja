<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>ScanAPI Report</title>
    <meta name="description" content="ScanAPI Report">
    <meta name="author" content="camilamaia/scanapi">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<header>
    <img src="./assets/scanAPI-logo.png">
    <a href="https://github.com/scanapi/scanapi">
        <img class="SmallIcon" src="./assets/github-logo.svg"></a>
</header>

<body>
    <div class="Content">

        <h1> ScanAPI Report</h1>

        {% for response in responses -%} {% set request = response.request %}

        <div class="accordion" id="accordionExample">
            <div class="card">
                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#{{ 'collapse' + (loop.index | string )}}" aria-expanded="true" aria-controls="{{ 'collapse' + (loop.index | string )}}">
                    <div class="card-header" id="headingOne">
                        <div class="card-title">
                            <span class="{{request.method}}">{{ request.method }}</span> {{ request.path_url }}
                        </div>
                        <span> {{ response.status_code }} </span>

                    </div>
                </button>

                <div id="{{ 'collapse' + (loop.index | string )}}" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                    <div class="card-body">
                        <section class="Request">
                            <h2>Request </h2>
                            <p> Full URL:
                                <a href="{{request.url}}"> {{request.url}}</a>
                            </p>

                            {% if request.headers|length > 0 %}
                            <table>
                                <tr>
                                    <th>
                                        Header
                                    </th>
                                    <th>
                                        Value
                                    </th>
                                </tr>
                                {% for key, value in request.headers.items() -%}

                                <tr>
                                    <td>
                                        {{ key }}
                                    </td>
                                    <td>
                                        {{value}}
                                    </td>
                                </tr>
                                {% endfor %}
                            </table>
                            {% endif %} {% if ( request.body and request.body.decode("UTF-8") != "{}" ) %}
                            <details>
                                <summary>Body</summary>
                                <p>
                                    {{ request.body }}
                                </p>
                            </details>
                            {% endif %}

                            <details>
                                <summary>cURL</summary>
                                <div>
                                    {{request|curlify}}
                                </div>
                            </details>
                        </section>

                        <section class="Response">

                            <h2>Response</h2>
                            <table>
                                <tr>
                                    <td>
                                        status code
                                    </td>
                                    <td>
                                        {{ response.status_code }}
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        response time
                                    </td>
                                    <td>
                                        {{ response.elapsed.total_seconds() }} s
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        redirect
                                    </td>
                                    <td>
                                        {{ response.is_redirect }}
                                    </td>
                                </tr>
                            </table>

                            {% if response.headers|length > 0 %}

                            <details>
                                <summary>Headers</summary>
                                <table>
                                    <tr>
                                        <th>
                                            Header
                                        </th>
                                        <th>
                                            Value
                                        </th>
                                    </tr>
                                    {% for key, value in response.headers.items() -%}
                                    <tr>
                                        <td>
                                            {{ key }}
                                        </td>
                                        <td>
                                            {{value}}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </table>
                            </details>
                            {% endif %}

                            <details>
                                <summary>Content</summary>
                                <p>
                                    {% if response.text %} {{ response.text }} {% else %} {{ response.content }} {% endif %}
                                </p>
                            </details>

                        </section>
                    </div>
                </div>

            </div>
            {% endfor %}
        </div>
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>

</html>